
# Base de datos

```sql
-- =============================================
-- Script SQL Server - Schema Final Corregido
-- Incluye: Constraints, Validaciones e Índices
-- =============================================

-- Tablas Base
CREATE TABLE [DISCIPLINA] (
 [ID_DIS] INTEGER NOT NULL IDENTITY(1,1),
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_DIS])
);
GO

CREATE TABLE [ROL] (
 [ID_ROL] INTEGER NOT NULL IDENTITY(1,1),
 [NOMBRE] VARCHAR(255) NOT NULL,
 [ADMINISTRADOR] BIT NOT NULL,
 PRIMARY KEY([ID_ROL])
);
GO

CREATE TABLE [USUARIO] (
 [ID_USR] INTEGER NOT NULL IDENTITY(1,1),
 [ID_ROL] INTEGER,
 [ID_DIS] INTEGER,
 [NOMBRE] VARCHAR(255) NOT NULL,
 [USUARIO] VARCHAR(255) NOT NULL,
 [CONTRASENA] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_USR]),
 CONSTRAINT UQ_USUARIO_LOGIN UNIQUE([USUARIO])
);
GO

CREATE TABLE [AUDITORIA] (
 [ID_AUD] INTEGER NOT NULL IDENTITY(1,1),
 [TABLA] VARCHAR(255) NOT NULL,
 [DIAHORA] DATETIME NOT NULL DEFAULT GETDATE(),
 [CAMPO] VARCHAR(255) NOT NULL,
 [VAL_ANTES] VARCHAR(255) NOT NULL,
 [VA_DESPUES] VARCHAR(255) NOT NULL,
 [ID_USR] INTEGER,
 PRIMARY KEY([ID_AUD])
);
GO

CREATE TABLE [ENTREGA] (
 [IDE] INTEGER NOT NULL IDENTITY(1,1),
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 [ORDEN] INTEGER NOT NULL,
 PRIMARY KEY([IDE])
);
GO

CREATE TABLE [REP_ENTREGA] (
 [ID_RENT] INTEGER NOT NULL IDENTITY(1,1),
 [IDPM] INTEGER NOT NULL,
 [IDE] INTEGER NOT NULL,
 PRIMARY KEY([ID_RENT])
);
GO

CREATE TABLE [JERARQUIA] (
 [IDJ] INTEGER NOT NULL IDENTITY(1,1),
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 [COLOR] VARCHAR(7) NULL,
 PRIMARY KEY([IDJ])
);
GO

CREATE TABLE [NIVEL] (
 [IDN] INTEGER NOT NULL IDENTITY(1,1),
 [IDJ] INTEGER NOT NULL,
 [IDNP] INTEGER NULL,
 [NOMBRE] VARCHAR(255) NOT NULL,
 [PLANTILLA] BIT NOT NULL DEFAULT 0,
 [NROPM] INTEGER NOT NULL DEFAULT 0,
 [ICONO] VARCHAR(50) NULL,
 [GENERADO] BIT NOT NULL DEFAULT 0,
 [COMENTARIO] VARCHAR(MAX) NULL,
 [ID_USR] INTEGER NULL,
 [FECHA_CREACION] DATETIME NULL,
[ID_DISCIPLINA_NIVEL] INTEGER NULL,
[UNIDAD_MANTENIBLE] BIT NOT NULL DEFAULT 0,
 PRIMARY KEY([IDN])
);
GO

CREATE TABLE [ATRIBUTO] (
 [IDT] INTEGER NOT NULL IDENTITY(1,1),
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 PRIMARY KEY([IDT])
);
GO

CREATE TABLE [ACTIVIDAD_NIVEL] (
 [IDA] INTEGER NOT NULL IDENTITY(1,1),
 [IDN] INTEGER NOT NULL,
 [IDT] INTEGER,
 [ORDEN] INTEGER NOT NULL,
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 [FUNCIONALIDAD] VARCHAR(MAX),
 [MODO_FALLA] VARCHAR(MAX),
 [EFECTO_FALLA] VARCHAR(MAX),
 [TIEMPO_PROMEDIO_FALLA] DECIMAL(10,2),
 [UNIDAD_TIEMPO_FALLA] VARCHAR(20),
 [ID_CONSECUENCIA_FALLA] INTEGER,
 [ID_CLASE_MANTENCION] INTEGER,
 [TAREA_MANTENCION] VARCHAR(MAX),
 [FRECUENCIA_TAREA] DECIMAL(10,2),
 [UNIDAD_FRECUENCIA] VARCHAR(20),
 [DURACION_TAREA] DECIMAL(10,2),
 [CANTIDAD_RECURSOS] INTEGER,
 [ID_CONDICION_ACCESO] INTEGER,
 [ID_DISCIPLINA_TAREA] INTEGER,
     PRIMARY KEY([IDA])
);
GO

CREATE TABLE [ATRIBUTO_VALOR] (
 [IDAV] INTEGER NOT NULL IDENTITY(1,1),
 [IDA] INTEGER NOT NULL,
 [VALOR] VARCHAR(255) NOT NULL,
 PRIMARY KEY([IDAV])
);
GO

CREATE TABLE [CONSECUENCIA_FALLA] (
 [ID_CONSECUENCIA] INTEGER NOT NULL IDENTITY(1,1),
 [CODIGO] VARCHAR(10) NOT NULL,
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_CONSECUENCIA])
);
GO

CREATE TABLE [CLASE_MANTENCION] (
 [ID_CLASE] INTEGER NOT NULL IDENTITY(1,1),
 [CODIGO] VARCHAR(10) NOT NULL,
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_CLASE])
);
GO

CREATE TABLE [CONDICION_ACCESO] (
 [ID_CONDICION] INTEGER NOT NULL IDENTITY(1,1),
 [CODIGO] VARCHAR(10) NOT NULL,
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_CONDICION])
);
GO

CREATE TABLE [DISCIPLINA_TAREA] (
 [ID_DISCIPLINA_TAREA] INTEGER NOT NULL IDENTITY(1,1),
 [CODIGO] VARCHAR(20) NOT NULL,
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_DISCIPLINA_TAREA])
);
GO

CREATE TABLE [DISCIPLINA_NIVEL] (
[ID_DISCIPLINA_NIVEL] INTEGER NOT NULL IDENTITY(1,1),
[CODIGO] VARCHAR(10) NOT NULL,
[DESCRIPCION] VARCHAR(255) NOT NULL,
PRIMARY KEY([ID_DISCIPLINA_NIVEL])
);
GO

CREATE TABLE [PM] (
 [IDPM] INTEGER NOT NULL IDENTITY(1,1),
 [IDN] INTEGER NOT NULL,
 [NRO] INTEGER NOT NULL,
 [CONJUNTO] INTEGER NOT NULL,
 [PROGRAMACION] DATETIME NOT NULL,
 [ESTADO] VARCHAR(255) NOT NULL,
 [HOROMETRO] INTEGER NOT NULL DEFAULT 0,
 [INICIO] DATETIME NOT NULL,
 [FIN] DATETIME NOT NULL,
 PRIMARY KEY([IDPM])
);
GO

CREATE TABLE [REP_NIVEL] (
 [IDRN] INTEGER NOT NULL IDENTITY(1,1),
 [IDPM] INTEGER NOT NULL,
 [IDN] INTEGER NOT NULL,
 [IDJ] INTEGER NOT NULL,
 [IDNP] INTEGER NOT NULL,
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 PRIMARY KEY([IDRN]),
 -- NOTA: IDN, IDJ, IDNP son datos históricos (snapshot), NO foreign keys
);
GO

CREATE TABLE [MODO_FALLA] (
 [IDMF] INTEGER NOT NULL IDENTITY(1,1),
 [IDRN] INTEGER,
 [MODOFALLA] VARCHAR(255) NOT NULL,
 PRIMARY KEY([IDMF])
);
GO

CREATE TABLE [REP_ACTIVIDAD] (
 [IDRA] INTEGER NOT NULL IDENTITY(1,1),
 [IDRN] INTEGER NOT NULL,
 [ORDEN] INTEGER NOT NULL,
 [DESCRIPCION] VARCHAR(255) NOT NULL,
 [REFERENCIA] VARCHAR(255) NOT NULL,
 [DURACION] INTEGER NOT NULL,
 PRIMARY KEY([IDRA])
);
GO

CREATE TABLE [USUARIO_PM] (
 [IDUPM] INTEGER NOT NULL IDENTITY(1,1),
 [IDPM] INTEGER NOT NULL,
 [ID_USR] INTEGER NOT NULL,
 PRIMARY KEY([IDUPM])
);
GO

CREATE TABLE [ACTIVIDAD] (
 [ID_ACT] INTEGER NOT NULL IDENTITY(1,1),
 [TITULO] VARCHAR(255) NOT NULL,
 [REFERENCIA] VARCHAR(255) NOT NULL,
 [DURACION] INTEGER NOT NULL,
 PRIMARY KEY([ID_ACT])
);
GO

CREATE TABLE [EQUIPO] (
 [ID_EQU] INTEGER NOT NULL IDENTITY(1,1),
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_EQU])
);
GO

CREATE TABLE [REPUESTO] (
 [ID_REP] INTEGER NOT NULL IDENTITY(1,1),
 [NOMBRE] VARCHAR(255) NOT NULL,
 [NROPARTE] VARCHAR(50) NOT NULL,
 PRIMARY KEY([ID_REP])
);
GO

CREATE TABLE [HERRAMIENTA] (
 [ID_HERR] INTEGER NOT NULL IDENTITY(1,1),
 [NOMBRE] VARCHAR(255) NOT NULL,
 PRIMARY KEY([ID_HERR])
);
GO

CREATE TABLE [COMPLEMENTO] (
 [ID_COM] INTEGER NOT NULL IDENTITY(1,1),
 [IDA] INTEGER NOT NULL,
 [ID_EQU] INTEGER,
 [ID_REP] INTEGER,
 [ID_HERR] INTEGER,
 PRIMARY KEY([ID_COM])
);
GO

-- =============================================
-- Foreign Keys
-- =============================================

-- USUARIO
ALTER TABLE [USUARIO]
ADD FOREIGN KEY([ID_ROL])
REFERENCES [ROL]([ID_ROL])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [USUARIO]
ADD FOREIGN KEY([ID_DIS])
REFERENCES [DISCIPLINA]([ID_DIS])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- AUDITORIA
ALTER TABLE [AUDITORIA]
ADD FOREIGN KEY([ID_USR])
REFERENCES [USUARIO]([ID_USR])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- MODO_FALLA
ALTER TABLE [MODO_FALLA]
ADD FOREIGN KEY([IDRN])
REFERENCES [REP_NIVEL]([IDRN])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- REP_ACTIVIDAD
ALTER TABLE [REP_ACTIVIDAD]
ADD FOREIGN KEY([IDRN])
REFERENCES [REP_NIVEL]([IDRN])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- REP_NIVEL (solo IDPM es FK, los demás son datos históricos)
ALTER TABLE [REP_NIVEL]
ADD FOREIGN KEY([IDPM])
REFERENCES [PM]([IDPM])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- USUARIO_PM
ALTER TABLE [USUARIO_PM]
ADD FOREIGN KEY([ID_USR])
REFERENCES [USUARIO]([ID_USR])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [USUARIO_PM]
ADD FOREIGN KEY([IDPM])
REFERENCES [PM]([IDPM])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- REP_ENTREGA
ALTER TABLE [REP_ENTREGA]
ADD FOREIGN KEY([IDE])
REFERENCES [ENTREGA]([IDE])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [REP_ENTREGA]
ADD FOREIGN KEY([IDPM])
REFERENCES [PM]([IDPM])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- COMPLEMENTO
ALTER TABLE [COMPLEMENTO]
ADD FOREIGN KEY([IDA])
REFERENCES [ACTIVIDAD_NIVEL]([IDA])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [COMPLEMENTO]
ADD FOREIGN KEY([ID_EQU])
REFERENCES [EQUIPO]([ID_EQU])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [COMPLEMENTO]
ADD FOREIGN KEY([ID_REP])
REFERENCES [REPUESTO]([ID_REP])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [COMPLEMENTO]
ADD FOREIGN KEY([ID_HERR])
REFERENCES [HERRAMIENTA]([ID_HERR])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- NIVEL
ALTER TABLE [NIVEL]
ADD FOREIGN KEY([IDJ])
REFERENCES [JERARQUIA]([IDJ])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [NIVEL]
ADD FOREIGN KEY([IDNP])
REFERENCES [NIVEL]([IDN])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [NIVEL]
ADD FOREIGN KEY([ID_USR])
REFERENCES [USUARIO]([ID_USR])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- PM
ALTER TABLE [PM]
ADD FOREIGN KEY([IDN])
REFERENCES [NIVEL]([IDN])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- ACTIVIDAD_NIVEL
ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([IDN])
REFERENCES [NIVEL]([IDN])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([IDT])
REFERENCES [ATRIBUTO]([IDT])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- ATRIBUTO_VALOR
ALTER TABLE [ATRIBUTO_VALOR]
ADD FOREIGN KEY([IDA])
REFERENCES [ACTIVIDAD_NIVEL]([IDA])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- ACTIVIDAD_NIVEL - Nuevas relaciones con catálogos
ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([ID_CONSECUENCIA_FALLA])
REFERENCES [CONSECUENCIA_FALLA]([ID_CONSECUENCIA])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([ID_CLASE_MANTENCION])
REFERENCES [CLASE_MANTENCION]([ID_CLASE])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([ID_CONDICION_ACCESO])
REFERENCES [CONDICION_ACCESO]([ID_CONDICION])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [ACTIVIDAD_NIVEL]
ADD FOREIGN KEY([ID_DISCIPLINA_TAREA])
REFERENCES [DISCIPLINA_TAREA]([ID_DISCIPLINA_TAREA])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

ALTER TABLE [NIVEL]
ADD FOREIGN KEY([ID_DISCIPLINA_NIVEL])
REFERENCES [DISCIPLINA_NIVEL]([ID_DISCIPLINA_NIVEL])
ON UPDATE NO ACTION ON DELETE NO ACTION;
GO

-- =============================================
-- CHECK CONSTRAINTS
-- =============================================

-- Validar que FIN sea después de INICIO
ALTER TABLE [PM]
ADD CONSTRAINT CHK_PM_FECHAS
CHECK ([FIN] >= [INICIO]);
GO

-- Validar que HOROMETRO sea positivo
ALTER TABLE [PM]
ADD CONSTRAINT CHK_PM_HOROMETRO
CHECK ([HOROMETRO] >= 0);
GO

-- COMPLEMENTO debe tener exactamente UNO de los tres tipos
ALTER TABLE [COMPLEMENTO]
ADD CONSTRAINT CHK_COMPLEMENTO_TIPO
CHECK (
    (ID_EQU IS NOT NULL AND ID_REP IS NULL AND ID_HERR IS NULL) OR
    (ID_EQU IS NULL AND ID_REP IS NOT NULL AND ID_HERR IS NULL) OR
    (ID_EQU IS NULL AND ID_REP IS NULL AND ID_HERR IS NOT NULL)
);
GO

-- NIVEL no puede ser padre de sí mismo
ALTER TABLE [NIVEL]
ADD CONSTRAINT CHK_NIVEL_NO_AUTOREFERENCIA
CHECK ([IDN] <> [IDNP] OR [IDNP] IS NULL);
GO

-- ORDEN debe ser positivo
ALTER TABLE [ACTIVIDAD_NIVEL]
ADD CONSTRAINT CHK_ACTIVIDAD_ORDEN
CHECK ([ORDEN] > 0);
GO

ALTER TABLE [REP_ACTIVIDAD]
ADD CONSTRAINT CHK_REP_ACTIVIDAD_ORDEN
CHECK ([ORDEN] > 0);
GO

ALTER TABLE [ENTREGA]
ADD CONSTRAINT CHK_ENTREGA_ORDEN
CHECK ([ORDEN] > 0);
GO

-- DURACION debe ser positiva
ALTER TABLE [REP_ACTIVIDAD]
ADD CONSTRAINT CHK_REP_ACTIVIDAD_DURACION
CHECK ([DURACION] > 0);
GO

ALTER TABLE [ACTIVIDAD]
ADD CONSTRAINT CHK_ACTIVIDAD_DURACION
CHECK ([DURACION] > 0);
GO

-- =============================================
-- UNIQUE INDEXES (Evitar duplicados)
-- =============================================

-- Evitar duplicar mismo PM-Entrega
CREATE UNIQUE INDEX UX_REP_ENTREGA_PM_IDE
ON [REP_ENTREGA]([IDPM], [IDE]);
GO

-- Evitar duplicar mismo Usuario-PM
CREATE UNIQUE INDEX UX_USUARIO_PM
ON [USUARIO_PM]([IDPM], [ID_USR]);
GO

-- Evitar nombres duplicados en tablas de catálogo
CREATE UNIQUE INDEX UX_ROL_NOMBRE
ON [ROL]([NOMBRE]);
GO

CREATE UNIQUE INDEX UX_DISCIPLINA_NOMBRE
ON [DISCIPLINA]([NOMBRE]);
GO

CREATE UNIQUE INDEX UX_JERARQUIA_DESCRIPCION
ON [JERARQUIA]([DESCRIPCION]);
GO

CREATE UNIQUE INDEX UX_CONSECUENCIA_FALLA_CODIGO
ON [CONSECUENCIA_FALLA]([CODIGO]);
GO

CREATE UNIQUE INDEX UX_CLASE_MANTENCION_CODIGO
ON [CLASE_MANTENCION]([CODIGO]);
GO

CREATE UNIQUE INDEX UX_CONDICION_ACCESO_CODIGO
ON [CONDICION_ACCESO]([CODIGO]);
GO

CREATE UNIQUE INDEX UX_DISCIPLINA_TAREA_CODIGO
ON [DISCIPLINA_TAREA]([CODIGO]);
GO

CREATE UNIQUE INDEX UX_DISCIPLINA_NIVEL_CODIGO
ON [DISCIPLINA_NIVEL]([CODIGO]);
GO

-- =============================================
-- ÍNDICES DE RENDIMIENTO
-- =============================================

-- Para búsquedas frecuentes
CREATE INDEX IX_PM_ESTADO ON [PM]([ESTADO]);
GO

CREATE INDEX IX_PM_PROGRAMACION ON [PM]([PROGRAMACION]);
GO

CREATE INDEX IX_AUDITORIA_DIAHORA ON [AUDITORIA]([DIAHORA]);
GO

CREATE INDEX IX_AUDITORIA_TABLA ON [AUDITORIA]([TABLA]);
GO

-- =============================================
-- COMENTARIOS SOBRE TABLAS ESPECIALES
-- =============================================

-- NOTA: La tabla ACTIVIDAD no tiene relaciones definidas
-- Posiblemente sea una tabla legacy o requiera revisión del modelo
-- Si es una plantilla/catálogo, considerar relacionarla con ACTIVIDAD_NIVEL

PRINT 'Schema creado exitosamente';
PRINT 'ADVERTENCIA: Tabla ACTIVIDAD no tiene relaciones definidas';
GO

-- =============================================
-- DATOS SINTÉTICOS - CATÁLOGOS DE MANTENCIÓN
-- =============================================

-- Consecuencia de Falla
INSERT INTO [CONSECUENCIA_FALLA] ([CODIGO], [NOMBRE]) VALUES
('E', 'Consecuencia al medio ambiente'),
('H', 'Consecuencia Escondida'),
('N', 'Consecuencia NO Operacional'),
('O', 'Consecuencia Operacional'),
('S', 'Consecuencia de Seguridad Personal');
GO

-- Clase de Mantención
INSERT INTO [CLASE_MANTENCION] ([CODIGO], [NOMBRE]) VALUES
('OHF', 'Operar hasta la Falla'),
('PDM', 'Tareas de mantención predictiva'),
('REEM', 'Tareas de Reemplazo Programadas'),
('REST', 'Tareas de Restauraciones Programadas'),
('TAREA', 'Tarea de Frecuencia Fija');
GO

-- Condición de Acceso
INSERT INTO [CONDICION_ACCESO] ([CODIGO], [NOMBRE]) VALUES
('ED', 'Equipo Detenido'),
('EF', 'Equipo en Marcha');
GO

-- Disciplina de Tarea
INSERT INTO [DISCIPLINA_TAREA] ([CODIGO], [NOMBRE]) VALUES
('ANA_ACTE', 'Analista en Aceite'),
('ANA_TERM', 'Analista en Termografía'),
('ANA_VIBR', 'Analista en Vibración'),
('C_CAB_M', 'Mecánico Contratista Cabina/Aire AC'),
('C_ELE_EL', 'Eléctrico Equipo Liviano Contratista'),
('C_MEC_EL', 'Mecánico Equipo Liviano Contratista'),
('C_MEC_FL', 'Mecánico Contratista Finning Camiones'),
('C_MECA_M', 'Mecánico Mina Contratista'),
('CON_EXT', 'CONTRATISTA EXTINTORES'),
('ELE_CAMI', 'Eléctrico de Camiones'),
('ELE_MANT', 'Eléctrico de Mantención Camiones'),
('ELE_PLPER', 'Eléctrico Palas-Perfo'),
('ELEC', 'Eléctrico - Planta'),
('ELEC_PDM', 'Predictivo Eléctrico - Planta'),
('ELIN_HUM', 'Elec-Inst A. Humeda'),
('ELIN_SEC', 'Elec-Inst A. Seca'),
('INST', 'Instrumentación - Planta'),
('LUB_CHANC', 'Lubricador Chancado'),
('LUB_SX', 'Lubricador SX'),
('LUB_TERR', 'Lubricador de palas y perforadoras'),
('MEC_CAMI', 'Mecanico Camiones'),
('MEC_CHANC', 'Mecánico Chancado'),
('MEC_MANT', 'Mecánico Mantención'),
('MEC_MOTO', 'Mecánico Motores'),
('MEC_PLPER', 'Mecánico Palas-Perfo'),
('MEC_SERV', 'Mecanico Servicio'),
('MEC_SX', 'Mecánico SX'),
('MEC_TERR', 'Mecánico de Terreno Camiones'),
('OO_CC', 'Obras Civiles'),
('OP_APIL', 'Operaciones Apilado'),
('OP_CHANC', 'Operaciones Chancado'),
('OP_RO', 'Operaciones Osmosis'),
('OP_SX', 'Operaciones SX'),
('OPE_PLPER', 'Operaciones Palas-Perfo'),
('PDM_MEC', 'Predictivo Mecánico'),
('SOL_CAMI', 'Soldador Camiones'),
('SOL_PALA', 'Soldador Palas y perforadoras');
GO

-- Disciplina de Niveles
INSERT INTO [DISCIPLINA_NIVEL] ([CODIGO], [DESCRIPCION]) VALUES
('E', 'Eléctrico'),
('G', 'General'),
('I', 'Instrumentación'),
('M', 'Mecánico');
GO

-- =============================================
-- DATOS SINTÉTICOS - EJEMPLOS DE ACTIVIDAD_NIVEL CON CAMPOS EXTENDIDOS
-- =============================================

-- Nota: Estos son ejemplos sintéticos. Necesitarás crear niveles e IDN válidos primero.
-- Ejemplo de INSERT con todos los campos nuevos:
/*
INSERT INTO [ACTIVIDAD_NIVEL] (
    [IDN], [IDT], [ORDEN], [DESCRIPCION],
    [FUNCIONALIDAD], [MODO_FALLA], [EFECTO_FALLA],
    [TIEMPO_PROMEDIO_FALLA], [UNIDAD_TIEMPO_FALLA],
    [ID_CONSECUENCIA_FALLA], [ID_CLASE_MANTENCION],
    [TAREA_MANTENCION], [FRECUENCIA_TAREA], [UNIDAD_FRECUENCIA],
    [DURACION_TAREA], [CANTIDAD_RECURSOS],
    [ID_CONDICION_ACCESO], [ID_DISCIPLINA_TAREA]
) VALUES (
    1, -- IDN (debe existir un nivel con ID 1)
    NULL, -- IDT
    1, -- ORDEN
    'Inspección de Acoplamiento',
    'El acoplamiento tiene como función principal: Transmitir el torque desde el motor hacia el equipo impulsado (bomba, reductor, ventilador, etc.).',
    'Si el acoplamiento no recibe inspección o mantenimiento periódico, pueden ocurrir modos de falla como: Desgaste excesivo de elementos flexibles (gomas, insertos, arañas).',
    'Los efectos típicos de estos modos de falla incluyen: Aumento de vibraciones en el sistema de accionamiento. Pérdida parcial o total de la transmisión de torque, provocando detención del equipo.',
    10, -- Tiempo promedio entre falla
    'Semanas',
    (SELECT ID_CONSECUENCIA FROM CONSECUENCIA_FALLA WHERE CODIGO = 'O'), -- Consecuencia Operacional
    (SELECT ID_CLASE FROM CLASE_MANTENCION WHERE CODIGO = 'TAREA'), -- Tarea de Frecuencia Fija
    'REVISAR ACOPLAMIENTO, DETERMINAR SI HAY RUIDO ANORMAL, VIBRACIÓN Y TEMPERATURAS ELEVADAS.',
    1, -- Frecuencia
    'Semanas',
    5, -- Duración en minutos
    1, -- Cantidad de recursos
    (SELECT ID_CONDICION FROM CONDICION_ACCESO WHERE CODIGO = 'EF'), -- Equipo en Marcha
    (SELECT ID_DISCIPLINA_TAREA FROM DISCIPLINA_TAREA WHERE CODIGO = 'MEC_CHANC') -- Mecánico Chancado
);
*/

-- =============================================
-- NOTAS SOBRE UNIDADES DE TIEMPO
-- =============================================
-- Las unidades de tiempo se manejan como texto para mayor flexibilidad.
-- Valores recomendados para UNIDAD_TIEMPO_FALLA y UNIDAD_FRECUENCIA:
--   'Segundos', 'Minutos', 'Horas', 'Días', 'Semanas', 'Meses', 'Años'
-- La conversión y cálculos se harán en la capa de aplicación según sea necesario.

PRINT 'Datos sintéticos insertados exitosamente';
GO
```
